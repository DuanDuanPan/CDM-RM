# 测试设计：5.1 由差异派生更改单/变更包

日期：2025-09-22｜设计者：Quinn

## 场景（总数：7｜单元：1｜集成：6）

AC1：规则将差异聚合为更改单；可手工合并/拆分
| ID          | 层级 | 优先级 | 测试内容                                  |
|-------------|------|--------|-------------------------------------------|
| 5.1-INT-001 | 集成 | P0     | 差异→更改单聚合正确                       |
| 5.1-INT-002 | 集成 | P0     | 手工合并/拆分预览与应用                   |
| 5.1-UNIT-001| 单元 | P1     | 聚合规则边界用例                          |

AC2：更改单/包状态机；审计
| 5.1-INT-003 | 集成 | P0     | Draft→Planned→Dispatched→InProgress→Closed |
| 5.1-INT-004 | 集成 | P0     | Cancelled 分支与回退约束                   |
| 5.1-INT-005 | 集成 | P0     | 非法跳转被拒绝                             |
| 5.1-INT-006 | 集成 | P0     | 每次转换写审计（who/when/traceId）         |

```yaml
test_design:
  scenarios_total: 7
  by_level: { unit: 1, integration: 6 }
  by_priority: { p0: 6, p1: 1 }
  coverage_gaps: []
```

