# 需求—测试追踪矩阵

## 故事：1.4 Prisma 基线与迁移

### 覆盖概览

- AC 总数：3｜完全覆盖：3｜部分：0｜未覆盖：0

### 映射明细

#### AC1：初始化 schema 并创建首个迁移
- 集成：`scripts/db/migrate-init.sh`（或 CI Step）
  - Given：空数据库
  - When：生成并应用首个迁移
  - Then：迁移成功且版本记录存在

#### AC2：最小表与索引
- 集成：`scripts/db/verify-meta.sql`
  - Given：已部署 schema
  - When：检查索引/唯一约束/外键
  - Then：均存在且生效

#### AC3：CI 执行迁移与回滚
- E2E：`ci/db-migrate.yml`
  - Given：CI 环境
  - When：执行部署与回滚脚本
  - Then：均返回 0 且产出日志

