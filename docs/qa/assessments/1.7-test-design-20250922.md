# 测试设计：故事 1.7 /metrics

日期：2025-09-22｜设计者：Quinn

## 场景

- 场景总数：5｜单元：1｜集成：3｜端到端：1

AC1：暴露 `/metrics`

| ID           | 层级 | 优先级 | 测试内容                              |
|--------------|------|--------|---------------------------------------|
| 1.7-INT-001  | 集成 | P0     | GET `/metrics` 返回 200               |
| 1.7-INT-002  | 集成 | P1     | 含默认进程/HTTP 指标                  |

AC2：示例告警规则；本地/CI 可拉取

| ID           | 层级 | 优先级 | 测试内容                              |
|--------------|------|--------|---------------------------------------|
| 1.7-UNIT-001 | 单元 | P1     | 告警规则语法校验（YAML/PromQL）       |
| 1.7-INT-003  | 集成 | P0     | CI curl 拉取 `/metrics` 成功          |
| 1.7-E2E-001  | E2E  | P1     | 基础告警触发/恢复（模拟）             |

```yaml
test_design:
  scenarios_total: 5
  by_level: { unit: 1, integration: 3, e2e: 1 }
  by_priority: { p0: 2, p1: 3 }
  coverage_gaps: []
```

