# 测试设计：2.3 DXL 同步

日期：2025-09-22｜设计者：Quinn

## 场景（总数：6｜单元：1｜集成：4｜端到端：1）

AC1：doors-adapter：Mock 客户端 + 切换真实端点
| ID          | 层级 | 优先级 | 测试内容                         |
|-------------|------|--------|----------------------------------|
| 2.3-UNIT-001| 单元 | P1     | 适配器接口契约与参数校验         |
| 2.3-INT-001 | 集成 | P0     | Mock/真实端点可切换              |

AC2：增量同步与幂等
| ID          | 层级 | 优先级 | 测试内容                         |
|-------------|------|--------|----------------------------------|
| 2.3-INT-002 | 集成 | P0     | 基于来源ID/更新时间戳去重        |
| 2.3-INT-003 | 集成 | P0     | 重试与幂等（重复事件不重复写入）  |

AC3：全量/增量同步均写审计
| ID          | 层级 | 优先级 | 测试内容                         |
|-------------|------|--------|----------------------------------|
| 2.3-INT-004 | 集成 | P0     | 审计完整（who/when/traceId）      |
| 2.3-E2E-001 | E2E  | P1     | 影子模式同步，验证不破坏生产      |

```yaml
test_design:
  scenarios_total: 6
  by_level: { unit: 1, integration: 4, e2e: 1 }
  by_priority: { p0: 4, p1: 2 }
  coverage_gaps: []
```

