# DOORS → 系统需求 映射表（MVP 草案）

映射与口径规则（阶段性）：英文匹配 + 中文匹配；统一参数描述；冲突由人工复核解决。

| 来源（DOORS） | 目标（系统需求字段） | 规则/变换 | 口径/规范 | 备注 |
|---|---|---|---|---|
| Module ID + Object ID + Baseline ID | 来源需求引用 | 直接采集，拼接为复合键 | 保持原值 | 作为溯源唯一键之一 |
| Object Heading（或“标题”） | 标题 | 直映 | 统一中英标点与大小写 | - |
| Object Text（或“描述/内容”） | 内容 | 直映 | 清理格式/占位符 | - |
| Priority（或自定义“优先级”） | 优先级 | 直映/枚举映射 | 统一取值域：P0/P1/P2… | 若值域不一致，入库前映射 |
| Status（或自定义“状态”） | 状态 | 直映/枚举映射 | 统一取值域：草拟/评审中/冻结… | - |
| Verification Method | 验证方式 | 直映/规范化 | 统一术语库 | - |
| Feasibility | 可行性 | 直映/规范化 | 是/否/待评估 | 若无该字段则留空 |
| Feasibility Analysis | 可行性分析 | 直映 | 支持多行文本 | - |
| Validation Activity | 验证活动 | 直映/规范化 | 统一术语库 | 可多条 |
| 结构化属性/文本内容 | 指标 | 抽取（见指标口径规范） | 单位/量纲/阈值/范围 | 支持人工补录 |
| （系统生成） | 系统需求ID | 规则生成：SR-<模块>-<序号> | 唯一 | 非DOORS字段 |

说明：
- 指标抽取规则与规范详见《docs/specs/metric-spec.md》。
- 去重建议：来源ID + 标题/内容哈希（初稿，可评审）。

---

## 实施细则（MVP）

### 1. 真源与回退策略
- 真源：DOORS 为唯一上游真实来源；本地编辑需标注“偏离上游”并进入复核队列
- 冲突处理：以 DOORS 为准；存在冲突→人工复核记录结论与责任人

### 2. 清洗与规范化
- 标题/内容清洗：移除多余空白/HTML/控制字符；统一中英标点与全/半角；大小写标准化
- 富文本处理：仅保留基本结构，剔除不可解析样式
- 日期时间统一：ISO 8601；默认时区 Asia/Shanghai (UTC+8)（示例：2025-09-19T10:00:00+08:00）

### 3. 枚举映射（V1 采纳）
优先级映射（采用）：

| DOORS 值 | 统一值 |
|---|---|
| Highest/Critical | P0 |
| High | P1 |
| Medium/Normal | P2 |

状态映射（采用）：

| DOORS 值 | 统一值 |
|---|---|
| Draft | 草拟 |
| In Review | 评审中 |
| Baseline/Released | 冻结 |
| Change/Pending | 变更中 |
| Closed | 关闭 |

验证方式/验证活动术语映射（采用）：维护中英同义词表，统一到术语库

| 同义词(中/英) | 统一术语 |
|---|---|
| Test/测试/试验 | 试验 |
| Analysis/分析 | 分析 |
| Inspection/检验 | 检验 |
| Demonstration/演示 | 演示 |

### 4. 去重键算法（规范化后再哈希）
步骤：
1) 去除空白/控制字符
2) 统一大小写与中英文标点
3) 可选：去除停用词/模板短语
4) 对 标题+内容 进行 hash（如 SHA-256），与 来源ID 组合为去重键

### 5. 缺失值与兜底
- 必填缺失：进入人工补录队列并标注原因
- 可选缺失：填充占位并记录“缺省原因”
- 不可解析：进入异常列表，需复核
