# 测试设计：6.4 闭环状态与覆盖

日期：2025-09-22｜设计者：Quinn

## 场景（总数：9｜单元：3｜集成：6）

AC1：交付物与验证结果回传后更新闭环状态与覆盖
| ID           | 层级 | 优先级 | 测试内容                                                     |
|--------------|------|--------|----------------------------------------------------------------|
| 6.4-INT-001  | 集成 | P0     | 回传单批次结果 → 需求闭环状态更新正确（通过/失败/未覆盖）    |
| 6.4-INT-002  | 集成 | P0     | 跨批次合并：取用例最新有效结果；跳过不计入                   |
| 6.4-INT-003  | 集成 | P0     | 并发回传幂等：重复提交不产生重复变更                          |
| 6.4-UNIT-001 | 单元 | P1     | 覆盖率基数/分子计算（按需求/按用例）                          |

AC2：审计与追溯：需求/指标/用例/批次互链
| 6.4-INT-004  | 集成 | P0     | 审计：who/when/what/diff 完整记录                              |
| 6.4-INT-005  | 集成 | P0     | 互链完整：需求↔指标↔用例↔批次 往返导航一致                    |
| 6.4-INT-006  | 集成 | P1     | 映射更新触发重算；闭环状态与覆盖同步刷新                      |
| 6.4-UNIT-002 | 单元 | P1     | 互链完整性校验器（外键/唯一/存在性）                           |
| 6.4-UNIT-003 | 单元 | P1     | 幂等与合并策略函数（最新有效结果选择、跳过规则）               |

```yaml
test_design:
  scenarios_total: 9
  by_level: { unit: 3, integration: 6 }
  by_priority: { p0: 6, p1: 3 }
  coverage_gaps: []
```

