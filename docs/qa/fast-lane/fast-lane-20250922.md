# 风险快车道（Early Test Architecture Input on High-Risk Areas）

日期：2025-09-22｜负责人：Quinn（建议分配见下）

说明：本清单面向高风险故事的“先验证后实现”，围绕样本/开关/审计/基线/门禁建立可执行轨道。

## 3.4 字段级权限（默认拒绝）
- [ ] 越权读取/写入集成用例（3 角色 × 读/写）→ Gate AUTH-READ-001/AUTH-WRITE-001
- [ ] 策略变更审计用例（who/when/what/diff）→ Gate AUTH-AUD-001
- [ ] 基线样本：最小字段矩阵 + 期望响应快照
- Owner: BE+QA｜Refs: docs/qa/gates/3.4-field-level-permissions.yml:1

## 4.6 差异生成与导出
- [ ] 黄金样本 50+ 文档与期望 diff（新增/变更/删除）→ Gate DIFF-ACC-001
- [ ] JSON Schema/契约校验 + Spectral（如适用）→ Gate DIFF-SCHEMA-001
- [ ] 性能基准（5MB 文档：P95≤2s/P99≤3s）→ Gate DIFF-PERF-001
- Owner: BE+QA｜Refs: docs/qa/gates/4.6-diff-generation-export.yml:1

## 6.2 回归批次生成
- [ ] 幂等键/去重：重复触发 N=5 仅 1 批次 → Gate BATCH-IDEMP-001
- [ ] 关联完整性校验器（批次↔工作包/用例）→ Gate BATCH-LINK-001
- [ ] 失败注入 + 指数退避 ≤3 次 → Gate BATCH-RETRY-001
- Owner: BE+QA｜Refs: docs/qa/gates/6.2-regression-batch-generation.yml:1

## 6.3 回归看板与指标
- [ ] KPI 口径与 PRD 7.3 对齐校验用例 → Gate KPI-ALIGN-001
- [ ] 重跑合并正确性（同用例多次仅计 1）→ Gate RERUN-MERGE-001
- [ ] 导出白名单/脱敏 + 页面一致性 → Gate EXPORT-SAFE-001
- Owner: FE+BE+QA｜Refs: docs/qa/gates/6.3-regression-board-metrics.yml:1

## 6.4 闭环状态与覆盖
- [ ] 合并/幂等策略回放（跨批次）→ Gate CLOSURE-CORR-001
- [ ] 覆盖率两种口径切换 + 重算触发 → Gate COVERAGE-FORM-001
- [ ] 互链完整性校验（需求↔指标↔用例↔批次）→ Gate TRACE-INTEG-001
- Owner: BE+QA｜Refs: docs/qa/gates/6.4-closure-status-coverage.yml:1

## 7.2 指标对比与风险识别
- [ ] 数值回放（单位/缺失/异常）RMSE≤1e-6 → Gate COMP-ACC-001
- [ ] 阈值版本绑定 + 审计 → Gate THRESH-VERS-001
- [ ] 导出白名单/脱敏 → Gate EXPORT-SAFE-002
- Owner: FE+BE+QA｜Refs: docs/qa/gates/7.2-metric-compare-risk-detection.yml:1

## 7.4 Top‑N 推荐与解释
- [ ] 固定随机种子→结果 100% 可复现 → Gate REC-DET-001
- [ ] 解释贡献与得分一致（误差≤1e-6）→ Gate EXPL-CONS-001
- [ ] 性能基准（1k 样本 N=10：P95≤500ms/P99≤800ms）→ Gate REC-PERF-001
- Owner: BE+QA｜Refs: docs/qa/gates/7.4-topn-recommendation-explanations.yml:1

## 2.3 DXL 同步（Mock + 可切换）
- [ ] Mock↔真实切换往返 3 次无重复/丢失 → Gate TOGGLE-IDEMP-001
- [ ] 切换/回退 P95≤3s/≤5s → Gate TOGGLE-RTT-001
- Owner: BE+QA｜Refs: docs/qa/gates/2.3-dxl-sync-toggle.yml:1

## 2.8 审计与幂等
- [ ] 审计字段完整性（who/when/what/diff/subject）→ Gate AUD-FIELDS-001
- [ ] 幂等键防重：重复 N=5 落库 1 次 → Gate IDEMP-KEY-001
- Owner: BE+QA｜Refs: docs/qa/gates/2.8-audit-idempotency.yml:1

## 3.3 动态表单生成与校验
- [ ] 表单渲染 P95≤200ms/P99≤350ms → Gate FORM-PERF-001
- [ ] 前后端校验一致率=100% → Gate VAL-CONS-001
- Owner: FE+BE+QA｜Refs: docs/qa/gates/3.3-dynamic-form-validation.yml:1

---

辅助工作
- [ ] 建立 `testdata/{epic.story}/golden/*` 黄金样本与期望输出
- [ ] 新增 CI “风险快车道”作业：基线回放 + 契约校验 + 关键性能阈值
- [ ] 统一审计与指标基线：结构化日志字段/核心指标/追踪点
