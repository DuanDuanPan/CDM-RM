# 测试设计：故事 1.5 Swagger/OpenAPI 导出

日期：2025-09-22｜设计者：Quinn

## 场景与覆盖

- 场景总数：6｜单元：1｜集成：4｜端到端：1

AC1：暴露 `/api/__openapi.json`

| ID           | 层级 | 优先级 | 测试内容                                 |
|--------------|------|--------|------------------------------------------|
| 1.5-INT-001  | 集成 | P0     | GET `/api/__openapi.json` 返回 200/JSON |

AC2：生成类型与客户端包

| ID           | 层级 | 优先级 | 测试内容                                  |
|--------------|------|--------|-------------------------------------------|
| 1.5-INT-002  | 集成 | P1     | 执行 `api:types` 产出文件存在             |
| 1.5-INT-003  | 集成 | P1     | 执行 `api:client` 产出文件存在            |

AC3：Spectral Lint 通过；OpenAPI diff 报告生成

| ID           | 层级 | 优先级 | 测试内容                                  |
|--------------|------|--------|-------------------------------------------|
| 1.5-UNIT-001 | 单元 | P1     | 规范基本字段校验（info/servers）          |
| 1.5-INT-004  | 集成 | P0     | CI 运行 spectral 并输出 SARIF             |
| 1.5-E2E-001  | E2E  | P1     | CI 产出 diff 报告工件                     |

```yaml
test_design:
  scenarios_total: 6
  by_level: { unit: 1, integration: 4, e2e: 1 }
  by_priority: { p0: 2, p1: 4 }
  coverage_gaps: []
```

