# Dev Response: Story 1.3 测试基线（2025-09-23）

## 目标

对 QA 在 trace / NFR 评审中指出的阻塞项提供修复记录与证据，便于复核。

## 关键修复

- 已更新 `yarn.lock`、`.yarn/install-state.gz` 并验证 `yarn install --immutable` 一次通过。
- 本地成功执行：
  - `yarn test:client`（Vitest 覆盖率 100%，输出目录：`reports/coverage/web`）。
  - `yarn test:server`（Jest 覆盖率 100%，输出目录：`reports/coverage/api`）。
  - `yarn coverage`（表格化展示覆盖率摘要）。
- `.ai/debug-log.md` 记录上述命令及一次失败案例（`--no-threads` 参数不被 Vitest 支持），便于 QA 重现。
- `.github/workflows/quality.yml` 已改为直接运行 `yarn test:client`，避免无效参数导致 CI 失败；并保留耗时记录、覆盖率工件上传。
- `package.json` 恢复 `test:web` / `test:api` alias，确保旧流程平滑过渡。
- README 新增“测试基线排错”小节，列出锁文件同步、覆盖率调试及命令注意事项。

## 附件与日志

- 覆盖率摘要：`reports/coverage/web/coverage-summary.json`、`reports/coverage/api/coverage-summary.json`
- 调试记录：`.ai/debug-log.md`
- 相关提交文件：`.github/workflows/quality.yml`、`README.md`、`package.json`

## QA 复核建议

1. 重新运行 `docs/qa/assessments` 中 Story 1.3 的 trace / nfr 流程，预计 AC1-AC3 可标记为 FULL，NFR 评级降至 PASS。
2. 在 CI 或本地执行 `yarn test:web`、`yarn test:client`、`yarn test:server`，核实 alias 与新脚本一致。
3. 评估首次 CI 运行的 `coverage-web`、`coverage-api` 工件大小与耗时，确认风险项 OPS-203。
