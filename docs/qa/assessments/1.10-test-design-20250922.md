# 测试设计：故事 1.10 CI 与分支保护

日期：2025-09-22｜设计者：Quinn

## 场景

- 场景总数：5｜集成：5

AC1：CI：install --immutable、lint、prettier:check、type-check、test、build

| ID            | 层级 | 优先级 | 测试内容                                  |
|---------------|------|--------|-------------------------------------------|
| 1.10-INT-001  | 集成 | P0     | `yarn install --immutable` 成功            |
| 1.10-INT-002  | 集成 | P0     | 运行 lint/format/type/test/build 全量       |
| 1.10-INT-003  | 集成 | P1     | 产出测试/覆盖率工件                        |

AC2：分支保护

| ID            | 层级 | 优先级 | 测试内容                                  |
|---------------|------|--------|-------------------------------------------|
| 1.10-INT-004  | 集成 | P1     | 受保护分支禁止直推（模拟）                 |
| 1.10-INT-005  | 集成 | P1     | 必需检查未通过时阻止合并（模拟）           |

```yaml
test_design:
  scenarios_total: 5
  by_level: { integration: 5 }
  by_priority: { p0: 2, p1: 3 }
  coverage_gaps: []
```

