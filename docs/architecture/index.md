# CDM 需求集成 MVP 全栈架构文档

## Table of Contents

- [CDM 需求集成 MVP 全栈架构文档](#table-of-contents)
  - [引言（Introduction）](./引言introduction.md)
    - [起始模板 / 既有项目](./引言introduction.md#起始模板-既有项目)
    - [变更日志（Change Log）](./引言introduction.md#变更日志change-log)
  - [高层架构（High Level Architecture）](./高层架构high-level-architecture.md)
    - [技术摘要（Technical Summary）](./高层架构high-level-architecture.md#技术摘要technical-summary)
    - [平台与基础设施（方案 A）](./高层架构high-level-architecture.md#平台与基础设施方案-a)
    - [仓库结构（Monorepo）](./高层架构high-level-architecture.md#仓库结构monorepo)
    - [高层架构图](./高层架构high-level-architecture.md#高层架构图)
    - [架构与设计模式（已选）](./高层架构high-level-architecture.md#架构与设计模式已选)
  - [技术栈（Tech Stack）](./技术栈tech-stack.md)
  - [工程与工具链落地（结合高收益与相容增强）](./工程与工具链落地结合高收益与相容增强.md)
    - [版本与环境](./工程与工具链落地结合高收益与相容增强.md#版本与环境)
    - [Monorepo 与目录](./工程与工具链落地结合高收益与相容增强.md#monorepo-与目录)
    - [TypeScript 配置分层](./工程与工具链落地结合高收益与相容增强.md#typescript-配置分层)
    - [契约与 API 参考流水线](./工程与工具链落地结合高收益与相容增强.md#契约与-api-参考流水线)
    - [CI/CD 与质量门槛（强制）](./工程与工具链落地结合高收益与相容增强.md#cicd-与质量门槛强制)
    - [测试策略](./工程与工具链落地结合高收益与相容增强.md#测试策略)
    - [可观测性与日志](./工程与工具链落地结合高收益与相容增强.md#可观测性与日志)
    - [容器与本地栈](./工程与工具链落地结合高收益与相容增强.md#容器与本地栈)
    - [协作模板与检查单](./工程与工具链落地结合高收益与相容增强.md#协作模板与检查单)
  - [组件与流程（Components & Workflows）](./组件与流程components-workflows.md)
    - [组件清单（职责与边界）](./组件与流程components-workflows.md#组件清单职责与边界)
    - [关键接口（Key Interfaces）](./组件与流程components-workflows.md#关键接口key-interfaces)
    - [组件关系图（Mermaid）](./组件与流程components-workflows.md#组件关系图mermaid)
    - [核心流程（序列图）](./组件与流程components-workflows.md#核心流程序列图)
  - [前端架构（Frontend Architecture）](./前端架构frontend-architecture.md)
    - [组件组织（目录约定）](./前端架构frontend-architecture.md#组件组织目录约定)
    - [组件模板（示例）](./前端架构frontend-architecture.md#组件模板示例)
    - [状态管理（TanStack Query + Zustand）](./前端架构frontend-architecture.md#状态管理tanstack-query-zustand)
    - [状态管理模式（约定）](./前端架构frontend-architecture.md#状态管理模式约定)
    - [路由与受保护页面](./前端架构frontend-architecture.md#路由与受保护页面)
    - [前端服务层（OpenAPI 客户端封装）](./前端架构frontend-architecture.md#前端服务层openapi-客户端封装)
  - [后端架构（Backend Architecture）](./后端架构backend-architecture.md)
    - [服务架构（NestJS · 传统服务）](./后端架构backend-architecture.md#服务架构nestjs-传统服务)
    - [数据库架构（Prisma 片段）](./后端架构backend-architecture.md#数据库架构prisma-片段)
    - [Repository 模式（示例）](./后端架构backend-architecture.md#repository-模式示例)
    - [鉴权与授权（Supabase JWT + 守卫）](./后端架构backend-architecture.md#鉴权与授权supabase-jwt-守卫)
    - [列级权限与导出治理（约定）](./后端架构backend-architecture.md#列级权限与导出治理约定)
  - [开发与运行流程（Development Workflow）](./开发与运行流程development-workflow.md)
    - [前置环境与初始化](./开发与运行流程development-workflow.md#前置环境与初始化)
    - [常用脚本（建议在根 package.json 提供）](./开发与运行流程development-workflow.md#常用脚本建议在根-packagejson-提供)
    - [本地开发流程](./开发与运行流程development-workflow.md#本地开发流程)
  - [编码标准与命名约定（Coding Standards）](./编码标准与命名约定coding-standards.md)
    - [关键规则（Fullstack Critical Rules）](./编码标准与命名约定coding-standards.md#关键规则fullstack-critical-rules)
    - [命名建议（示例）](./编码标准与命名约定coding-standards.md#命名建议示例)
  - [统一错误处理（Error Handling）](./统一错误处理error-handling.md)
    - [前端错误模型与拦截](./统一错误处理error-handling.md#前端错误模型与拦截)
    - [后端异常过滤器（NestJS）](./统一错误处理error-handling.md#后端异常过滤器nestjs)
  - [测试与覆盖率（Testing & Coverage）](./测试与覆盖率testing-coverage.md)
  - [监控与可观测性（Monitoring & Observability）](./监控与可观测性monitoring-observability.md)
    - [环境变量（示例）](./监控与可观测性monitoring-observability.md#环境变量示例)
    - [指标建议](./监控与可观测性monitoring-observability.md#指标建议)
  - [一次性落地清单（Checklist）](./一次性落地清单checklist.md)
  - [监控与检查清单结果（CI 自动化）](./监控与检查清单结果ci-自动化.md)
    - [GitHub Actions 工作流（示例：.github/workflows/quality.yml）](./监控与检查清单结果ci-自动化.md#github-actions-工作流示例githubworkflowsqualityyml)
    - [报告产物与路径约定](./监控与检查清单结果ci-自动化.md#报告产物与路径约定)
    - [检查清单结果（最新一次 CI）](./监控与检查清单结果ci-自动化.md#检查清单结果最新一次-ci)
  - [API 规范（REST + OpenAPI 3.0）](./api-规范rest-openapi-30.md)
    - [基本约定](./api-规范rest-openapi-30.md#基本约定)
    - [主要端点（节选）](./api-规范rest-openapi-30.md#主要端点节选)
    - [请求/响应示例（节选）](./api-规范rest-openapi-30.md#请求响应示例节选)
    - [枚举码值与 i18n 映射（展示）](./api-规范rest-openapi-30.md#枚举码值与-i18n-映射展示)
  - [数据模型与索引（Models & Indexing）](./数据模型与索引models-indexing.md)
    - [ER 概览图](./数据模型与索引models-indexing.md#er-概览图)
    - [需求 Requirement](./数据模型与索引models-indexing.md#需求-requirement)
    - [指标 Metric](./数据模型与索引models-indexing.md#指标-metric)
    - [RBOM 节点 RbomNode](./数据模型与索引models-indexing.md#rbom-节点-rbomnode)
    - [绑定 RequirementRbomBinding](./数据模型与索引models-indexing.md#绑定-requirementrbombinding)
    - [差异/变更/通知/工作包（摘要）](./数据模型与索引models-indexing.md#差异变更通知工作包摘要)
    - [审计 AuditLog](./数据模型与索引models-indexing.md#审计-auditlog)
    - [其他（配置与元模型）](./数据模型与索引models-indexing.md#其他配置与元模型)
    - [保留与归档（建议）](./数据模型与索引models-indexing.md#保留与归档建议)
  - [权限与治理矩阵（RBAC/ABAC & Export Governance）](./权限与治理矩阵rbacabac-export-governance.md)
    - [角色（建议）](./权限与治理矩阵rbacabac-export-governance.md#角色建议)
    - [资源→动作（示例）](./权限与治理矩阵rbacabac-export-governance.md#资源动作示例)
    - [列级权限](./权限与治理矩阵rbacabac-export-governance.md#列级权限)
    - [导出治理](./权限与治理矩阵rbacabac-export-governance.md#导出治理)
    - [策略表达与执行（Policy Enforcement）](./权限与治理矩阵rbacabac-export-governance.md#策略表达与执行policy-enforcement)
  - [NFR/SLO 与告警（性能/可靠性/可用性）](./nfrslo-与告警性能可靠性可用性.md)
    - [目标（初版）](./nfrslo-与告警性能可靠性可用性.md#目标初版)
    - [告警建议](./nfrslo-与告警性能可靠性可用性.md#告警建议)
  - [安全与合规（Security & Compliance）](./安全与合规security-compliance.md)
    - [威胁建模（简表）](./安全与合规security-compliance.md#威胁建模简表)
    - [凭证/密钥](./安全与合规security-compliance.md#凭证密钥)
    - [备份/恢复](./安全与合规security-compliance.md#备份恢复)
  - [安全与输入校验增补（v1.1）](./安全与输入校验增补v11.md)
    - [后端输入验证（DTO + 全局管道）](./安全与输入校验增补v11.md#后端输入验证dto-全局管道)
    - [CORS 与 CSRF 策略](./安全与输入校验增补v11.md#cors-与-csrf-策略)
    - [共享 Schema（可选）](./安全与输入校验增补v11.md#共享-schema可选)
    - [传输与存储加密](./安全与输入校验增补v11.md#传输与存储加密)
    - [日志脱敏（pino.redact 示例）](./安全与输入校验增补v11.md#日志脱敏pinoredact-示例)
  - [熔断与扩缩容增补（v1.1）](./熔断与扩缩容增补v11.md)
    - [熔断/降级（DOORS/OA 适配器）](./熔断与扩缩容增补v11.md#熔断降级doorsoa-适配器)
    - [负载均衡与扩缩容触发](./熔断与扩缩容增补v11.md#负载均衡与扩缩容触发)
  - [测试与门禁增补（v1.1）](./测试与门禁增补v11.md)
    - [性能测试（k6 示例）](./测试与门禁增补v11.md#性能测试k6-示例)
    - [安全测试（ZAP/Snyk 占位）](./测试与门禁增补v11.md#安全测试zapsnyk-占位)
    - [A11y 自动化建议](./测试与门禁增补v11.md#a11y-自动化建议)
  - [依赖升级与三方频控增补（v1.1）](./依赖升级与三方频控增补v11.md)
    - [升级节奏与 OSV 修复 SLA](./依赖升级与三方频控增补v11.md#升级节奏与-osv-修复-sla)
    - [三方接口频控（默认）](./依赖升级与三方频控增补v11.md#三方接口频控默认)
  - [部署拓扑（Deployment Topology · 方案 A）](./部署拓扑deployment-topology-方案-a.md)
  - [迁移与回滚（Migrations & Rollback）](./迁移与回滚migrations-rollback.md)
    - [策略](./迁移与回滚migrations-rollback.md#策略)
    - [流程](./迁移与回滚migrations-rollback.md#流程)
  - [架构决策记录（ADR 指南）](./架构决策记录adr-指南.md)
    - [位置与命名](./架构决策记录adr-指南.md#位置与命名)
    - [模板](./架构决策记录adr-指南.md#模板)
  - [C4 视图（C4 Views）](./c4-视图c4-views.md)
    - [系统上下文图（Context）](./c4-视图c4-views.md#系统上下文图context)
    - [容器图（Container）](./c4-视图c4-views.md#容器图container)
  - [配置与密钥管理（Configuration & Secrets）](./配置与密钥管理configuration-secrets.md)
  - [缓存与限流（Caching & Rate Limiting）](./缓存与限流caching-rate-limiting.md)
  - [队列与可靠性策略（Queues & Reliability）](./队列与可靠性策略queues-reliability.md)
  - [失败模式与恢复（Failure Modes & Resilience）](./失败模式与恢复failure-modes-resilience.md)
  - [环境矩阵（Environments Matrix）](./环境矩阵environments-matrix.md)
  - [发布策略（Release Strategy）](./发布策略release-strategy.md)
  - [成本与容量（Cost & Capacity）](./成本与容量cost-capacity.md)
  - [i18n 与无障碍（i18n & A11y 摘要）](./i18n-与无障碍i18n-a11y-摘要.md)
  - [可追溯性矩阵（Traceability）](./可追溯性矩阵traceability.md)
  - [路线图与里程碑（Roadmap & Milestones）](./路线图与里程碑roadmap-milestones.md)
  - [术语与词汇表（Glossary）](./术语与词汇表glossary.md)
  - [附录 A：.env.example（示例）](./附录-aenvexample示例.md)
  - [附录 B：导出治理配置（示例）](./附录-b导出治理配置示例.md)
  - [开放问题与假设（Open Questions & Assumptions）](./开放问题与假设open-questions-assumptions.md)
